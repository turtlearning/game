<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì»¤í”¼ ì œì¡° ê²Œì„</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .container { width: 50%; margin: auto; padding: 20px; }
        .step { display: none; margin-top: 20px; }
        .visible { display: block; }
        .warning { color: red; font-weight: bold; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .selected { background-color: #4CAF50; color: white; }
        #cupImage { width: 100px; height: 150px; margin: 20px auto; }
    </style>
</head>
<body>

    <h1>â˜• ì»¤í”¼ ì œì¡° ê²Œì„ â˜•</h1>
    <h3 id="order"></h3>
    <img id="cupImage" src="ì»µ.jpeg" alt="ì»µ ì´ë¯¸ì§€">

    <div class="container">
        <div id="step1" class="step visible">
            <h2>ì»µ ì‚¬ì´ì¦ˆ ì„ íƒ</h2>
            <button onclick="selectCup(12, this)">12oz</button>
            <button onclick="selectCup(16, this)">16oz</button>
            <button onclick="nextStep(1)">âœ”</button>
        </div>

        <div id="step2" class="step">
            <h2>HOT / ICE ì„ íƒ</h2>
            <button onclick="selectTemperature('HOT', this)">HOT</button>
            <button onclick="selectTemperature('ICE', this)">ICE</button>
            <button onclick="nextStep(2)">âœ”</button>
        </div>

            <div id="step3" class="step">
                <h2>ë¬¼ / ìš°ìœ  ì„ íƒ</h2>
                <button onclick="selectLiquid('ë¬¼', this)">ë¬¼</button>
                <button onclick="selectLiquid('ìš°ìœ ', this)">ìš°ìœ </button>
                <button onclick="selectLiquid(null, this)">ì„ íƒ ì•ˆ í•¨</button>
                <button onclick="nextStep(3)">âœ”</button>
            </div>

        <div id="step4" class="step">
            <h2>ì‹œëŸ½ ì„ íƒ</h2>
            <button onclick="toggleSyrup('ë°”ë‹ë¼', this)">ë°”ë‹ë¼</button>
            <button onclick="toggleSyrup('ì´ˆì½œë¦¿', this)">ì´ˆì½œë¦¿</button>
            <button onclick="toggleSyrup('ì¹´ë¼ë©œ', this)">ì¹´ë¼ë©œ</button>
            <button onclick="toggleSyrup('none', this)">ì„ íƒ ì•ˆ í•¨</button>
            <button onclick="nextStep(4)">âœ”</button>
        </div>

        <div id="step5" class="step">
            <h2>ìƒ· ì„ íƒ</h2>
            <button onclick="adjustShot(-1)">-</button>
            <span id="shotCount">2</span>
            <button onclick="adjustShot(1)">+</button>
            <button onclick="nextStep(5)">âœ”</button>
        </div>

        <div id="step6" class="step">
            <h2>í† í•‘ ì„ íƒ</h2>
            <button onclick="toggleTopping('ì‹œë‚˜ëª¬', this)">ì‹œë‚˜ëª¬</button>
            <button onclick="toggleTopping('ì¹´ë¼ë©œ', this)">ì¹´ë¼ë©œ</button>
            <button onclick="toggleTopping(null, this)">ì„ íƒ ì•ˆ í•¨</button>
            <button onclick="nextStep(6)">âœ”</button>
        </div>

        <div id="finalStep" class="step">
            <h2>âœ… ì œì¡° ì™„ë£Œ!</h2>
            <p id="finalMessage"></p>
            <button onclick="resetGame()">ê²Œì„ ì´ˆê¸°í™”</button>
        </div>
    </div>

    <script>
        const drinks = [
            { name: "ì—ìŠ¤í”„ë ˆì†Œ(HOT)", cup: 12, temperature: "HOT", syrup: ["none"], liquid: null, topping: null },
            { name: "ì•„ë©”ë¦¬ì¹´ë…¸(HOT)", cup: 12, temperature: "HOT", syrup: ["none"], liquid: "ë¬¼", topping: null },
            { name: "ì•„ë©”ë¦¬ì¹´ë…¸(ICE)", cup: 16, temperature: "ICE", syrup: ["none"], liquid: "ë¬¼", topping: null },
            { name: "ì¹´í˜ë¼ë–¼(HOT)", cup: 12, temperature: "HOT", syrup: ["none"], liquid: "ìš°ìœ ", topping: null },
            { name: "ì¹´í˜ë¼ë–¼(ICE)", cup: 16, temperature: "ICE", syrup: ["none"], liquid: "ìš°ìœ ", topping: null },
            { name: "ì¹´í‘¸ì¹˜ë…¸(HOT)", cup: 12, temperature: "HOT", syrup: ["none"], liquid: "ìš°ìœ ", topping: "ì‹œë‚˜ëª¬" },
            { name: "ë°”ë‹ë¼ë¼ë–¼(HOT)", cup: 12, temperature: "HOT", syrup: ["ë°”ë‹ë¼"], liquid: "ìš°ìœ ", topping: null },
            { name: "ë°”ë‹ë¼ë¼ë–¼(ICE)", cup: 16, temperature: "ICE", syrup: ["ë°”ë‹ë¼"], liquid: "ìš°ìœ ", topping: null },
            { name: "ì¹´í˜ëª¨ì¹´(HOT)", cup: 12, temperature: "HOT", syrup: ["ì´ˆì½œë¦¿"], liquid: "ìš°ìœ ", topping: null },
            { name: "ì¹´í˜ëª¨ì¹´(ICE)", cup: 16, temperature: "ICE", syrup: ["ì´ˆì½œë¦¿"], liquid: "ìš°ìœ ", topping: null },
            { name: "ì¹´ë¼ë©œë§ˆë¼ì•„ë˜(HOT)", cup: 12, temperature: "HOT", syrup: ["ë°”ë‹ë¼", "ì¹´ë¼ë©œ"], liquid: "ìš°ìœ ", topping: "ì¹´ë¼ë©œ" },
            { name: "ì¹´ë¼ë©œë§ˆë¼ì•„ë˜(ICE)", cup: 16, temperature: "ICE", syrup: ["ë°”ë‹ë¼", "ì¹´ë¼ë©œ"], liquid: "ìš°ìœ ", topping: "ì¹´ë¼ë©œ" }
        ];

        let order = drinks[Math.floor(Math.random() * drinks.length)];
        order.shot = Math.floor(Math.random() * 3) + 1;
        document.getElementById("order").innerText = `ğŸ§¾ ì£¼ë¬¸: ${order.name} (ìƒ· ${order.shot}ì”)`;
        let playerSelection = { cup: null, temperature: null, syrup: [], shot: 2, liquid: null, topping: null };

        function nextStep(step) {
            let correct = false;
            
            switch(step) {
                case 1:
                    correct = playerSelection.cup === order.cup;
                    break;
                case 2:
                    correct = playerSelection.temperature === order.temperature;
                    break;
                case 3:
                    correct = playerSelection.liquid === order.liquid;
                    break;
                case 4:
                    correct = arraysEqual(playerSelection.syrup, order.syrup);
                    break;
                case 5:
                    correct = playerSelection.shot === order.shot;
                    break;
                case 6:
                    correct = playerSelection.topping === order.topping;
                    break;
            }

            if (correct) {
                document.getElementById(`step${step}`).classList.remove("visible");
                if (step < 6) {
                    document.getElementById(`step${step + 1}`).classList.add("visible");
                } else {
                    document.getElementById("finalStep").classList.add("visible");
                }
            } else {
                if (playerSelection.cup === 12 && order.cup === 16) {
                    alert("ICE ìš©ê¸°ëŠ” 16oz ì…ë‹ˆë‹¤.");
                } else if (playerSelection.cup === 16 && order.cup === 12) {
                    alert("HOT ìš©ê¸°ëŠ” 12oz ì…ë‹ˆë‹¤.");
                }
                else if (playerSelection.temperature != order.temperature) {
                    alert("ì˜¨ë„ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                }                
                else if (playerSelection.liquid === "ë¬¼" && order.liquid === "ìš°ìœ ") {
                    alert(`${order.name}ì€ ${order.liquid}ë¥¼ ë² ì´ìŠ¤ë¡œ ë§Œë“­ë‹ˆë‹¤.`);
                }
                else if (playerSelection.liquid === "ìš°ìœ " && order.liquid === "ë¬¼") {
                    alert(`${order.name}ì€ ${order.liquid}ì„ ë² ì´ìŠ¤ë¡œ ë§Œë“­ë‹ˆë‹¤.`);
                }
                else if (playerSelection.liquid !== null && order.name === "ì—ìŠ¤í”„ë ˆì†Œ(HOT)") {
                    alert(`${order.name}ëŠ” ë² ì´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.`);
                }
                else if (playerSelection.liquid === null && order.name !== "ì—ìŠ¤í”„ë ˆì†Œ(HOT)") {
                    alert(`${order.name}ëŠ” ë² ì´ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤.`);
                }
                else if (!arraysEqual(playerSelection.syrup.sort(), order.syrup.sort())) {
                    if(order.syrup.length === 0)
                        alert(`${order.name}ì€ ì‹œëŸ½ì´ ì•ˆ ë“¤ì–´ê°‘ë‹ˆë‹¤.`);
                    else
                        alert(`${order.name}ì€ ${order.syrup.join(", ")} ì‹œëŸ½ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.`);
                }
                else if (playerSelection.shot !=  order.shot) {
                    alert(`ì£¼ë¬¸ ë°›ì€ ìƒ·ì˜ ê°œìˆ˜ ${order.shot}ì™€ ë‹¤ë¦…ë‹ˆë‹¤.`);
                }
                else if (order.topping === null && playerSelection.topping !== null) {
                    alert(`${order.name}ì˜ í† í•‘ì€ ì—†ìŠµë‹ˆë‹¤.`);
                }  
                else if (playerSelection.topping !== order.topping) {
                    alert(`${order.name}ì˜ í† í•‘ì€ ${order.topping}ì…ë‹ˆë‹¤.`);
                }  
                else alert("ì„ íƒí•œ ê°’ì´ ì£¼ë¬¸ê³¼ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.");
            }
        }

        function arraysEqual(arr1, arr2) {
            if (arr1.length !== arr2.length) return false;
            for (let i = 0; i < arr1.length; i++) {
                if (arr1[i] !== arr2[i]) return false;
            }
            return true;
        }

        function selectCup(size, button) {
            playerSelection.cup = size;
            highlightSelected(button);

            updateCupImage(1);
        }

        function selectTemperature(temp, button) {
            playerSelection.temperature = temp;
            highlightSelected(button);

            updateCupImage(2);          
        }

        function selectLiquid(liquid, button) {
            playerSelection.liquid = liquid;
            highlightSelected(button);

            updateCupImage(3);          
        }

        function toggleSyrup(syrup, button) {
            let index = playerSelection.syrup.indexOf(syrup);
            if (index === -1) {
                playerSelection.syrup.push(syrup);
                button.classList.add("selected");
            } else {
                playerSelection.syrup.splice(index, 1);
                button.classList.remove("selected");
            }
            playerSelection.syrup.sort();   
        }

        function toggleTopping(topping, button) {
            playerSelection.topping = topping;
            highlightSelected(button);

            updateCupImage(5);
        }

        function adjustShot(change) {
            let shotSpan = document.getElementById("shotCount");
            let newShot = playerSelection.shot + change;
            if (newShot >= 1 && newShot <= 3) {
                playerSelection.shot = newShot;
                shotSpan.innerText = newShot;
            }

            updateCupImage(4);                      
        }

        function highlightSelected(button) {
            let buttons = button.parentElement.querySelectorAll("button");
            buttons.forEach(btn => btn.classList.remove("selected"));
            button.classList.add("selected");
        }

        function updateCupImage(step) {
            let cupImage = document.getElementById("cupImage");
                if (step === 0) {
                    cupImage.src = "ì»µ.jpeg";
                }    
                else if (step === 1) {
                    if (playerSelection.cup === 12) {
                        cupImage.src = "12oz.png";
                    } else if (playerSelection.cup === 16) {
                        cupImage.src = "16oz.png";
                    }
                }
                else if (step === 2) {
                    if (playerSelection.temperature === "HOT") {
                        cupImage.src = "12oz.png";
                    } else if (playerSelection.temperature === "ICE") {
                        cupImage.src = "ì–¼ìŒì»µ.png";
                    }
                }
                else if (step === 3) {
                    if (playerSelection.temperature === "HOT" && playerSelection.liquid === "ë¬¼") {
                        cupImage.src = "ëœ¨ì‹ ë¬¼.png";
                    } else if (playerSelection.temperature === "HOT" && playerSelection.liquid === "ìš°ìœ ") {
                        cupImage.src = "ëœ¨ì‹ ìš°ìœ .png";
                    } else if (playerSelection.temperature === "ICE" && playerSelection.liquid === "ë¬¼") {
                        cupImage.src = "ì–¼ìŒë¬¼.png";
                    } else if (playerSelection.temperature === "ICE" && playerSelection.liquid === "ìš°ìœ ") {
                        cupImage.src = "ì–¼ìŒìš°ìœ .png";
                    }
                }                
                else if (step === 4) {
                    if (playerSelection.temperature === "HOT" && playerSelection.liquid === "ë¬¼") {
                        cupImage.src = "ëœ¨ì•„.png";
                    } else if (playerSelection.temperature === "HOT" && playerSelection.liquid === "ìš°ìœ ") {
                        cupImage.src = "í•« ë¼ë–¼.png";
                    } else if (playerSelection.temperature === "ICE" && playerSelection.liquid === "ë¬¼") {
                        cupImage.src = "ì•„ì•„.png";
                    } else if (playerSelection.temperature === "ICE" && playerSelection.liquid === "ìš°ìœ ") {
                        cupImage.src = "ë¼ë–¼ ì•„ì´ìŠ¤.png";
                    }
                }
                else if (step === 5) {
                    if (order.name === "ì¹´í‘¸ì¹˜ë…¸(HOT)") {
                        cupImage.src = "ì¹´í‘¸ì¹˜ë…¸.png";
                    } else if (order.name === "ì¹´ë¼ë©œë§ˆë¼ì•„ë˜(ICE)") {
                        cupImage.src = "ì¹´ë¼ë©œ ì•„ì´ìŠ¤.png";
                    } else if (order.name === "ì¹´ë¼ë©œë§ˆë¼ì•„ë˜(HOT)") {
                        cupImage.src = "ì¹´ë¼ë©œ í•«.png";
                    }
                }
            }

        function resetGame() {
            playerSelection = { cup: null, temperature: null, syrup: [], shot: 1, liquid: null, topping: [] };
            order = drinks[Math.floor(Math.random() * drinks.length)];
            order.shot = Math.floor(Math.random() * 3) + 1;
            document.getElementById("order").innerText = `ğŸ§¾ ì£¼ë¬¸: ${order.name} (ìƒ· ${order.shot}ì”)`;

            let allButtons = document.querySelectorAll("button");
                allButtons.forEach((button) => {
                    button.classList.remove("selected");
                });

            document.getElementById("finalStep").classList.remove("visible");
            document.getElementById("step1").classList.add("visible");
            updateCupImage(0);
        }
    </script>

</body>
</html>